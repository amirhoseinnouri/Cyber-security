# Compiler settings
CXX := g++
CXXFLAGS := -std=c++17 -Wall -Wextra -I./include
LDFLAGS := -lssl -lcrypto -lsqlite3

# Source files
SRC_FILES := $(wildcard src/*.cpp)
OBJ_FILES := $(patsubst src/%.cpp,obj/%.o,$(SRC_FILES))
EXEC := malware_detector

# Main target
all: $(EXEC)

$(EXEC): $(OBJ_FILES) obj/main.o
	$(CXX) -o $@ $^ $(LDFLAGS)

# Pattern rule for object files
obj/%.o: src/%.cpp | obj
	$(CXX) $(CXXFLAGS) -c -o $@ $<

obj/main.o: main.cpp | obj
	$(CXX) $(CXXFLAGS) -c -o $@ $<

# Create obj directory
obj:
	mkdir -p obj

clean:
	rm -rf obj $(EXEC)

.PHONY: all clean
# In your Makefile, ensure all source files are listed
SRC_FILES := src/behavior_analyzer.cpp src/database.cpp src/hash_analyzer.cpp src/reporter.cpp src/scanner.cpp